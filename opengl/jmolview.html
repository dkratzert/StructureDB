<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" src="./JSmol.min.js"></script>
<script type="text/javascript" src="./qwebchannel.js"></script>

<script type="text/javascript">

//Jmol._isAsync = true;
var jmolApplet; // set up in HTML table, below
var jshelper;

var options = {
    width: 200,
    height: 200,
    debug: false,
    color: "0xFFFFFF",
    addSelectionOptions: false,
    use: "HTML5",   // only HTML5 works
    j2sPath: "./j2s",
    script: "set zoomlarge false;set antialiasDisplay",
    spin: true,
    disableJ2SLoadMonitor: true,
    disablePopupMenu: true,
    disableInitialConsole: true,
    allowJavaScript: true,
    console: "none" // default will be jmolApplet0_infodiv, but you can designate another div here or "none"
};

new QWebChannel(qt.webChannelTransport, function (channel) {
    // now you retrieve your object
    jshelper = channel.objects.jshelper;
    alert('webchannel');
});

function loadStruct() {
    alert('struct1');
    var myIntInJSside= JSobject.myIntInCppSide;
    Jmol.script(jmolApplet, 'load '+jshelper );
    alert('struct2');
}

</script>
</head>

<body>
    <script type="text/javascript">
        jmolApplet = Jmol.getApplet("jmolApplet0", options);
        Jmol.script(jmolApplet, 'load "../test-data/p21c.cif"' );
    </script>
</body>
</html>



